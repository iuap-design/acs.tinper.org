<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>富文本编辑器 AcEditor</title>
    <link type="text/css" rel="stylesheet" href="assets/css/bootstrap.css"/>
    <link type="text/css" rel="stylesheet" href="assets/css/bootstrap-responsive.css"/>
    <link type="text/css" rel="stylesheet" href="assets/css/pilcrow.css"/>
    <link type="text/css" rel="stylesheet" href="assets/css/hljs-github.min.css"/>
    <link type="text/css" rel="stylesheet" href="assets/css/style.css"/>
  </head>
<body>

  <div class="container-fluid">
    <div class="row-fluid">
      <div class="span3"><ul class="nav nav-list">
    <li class="sidebar-header-1"><a href="#富文本编辑器-aceditor">富文本编辑器 AcEditor</a></li>
    <li class="sidebar-header-2"><a href="#何时使用">何时使用</a></li>
    <li class="sidebar-header-2"><a href="#如何使用">如何使用</a></li>
    <li class="sidebar-header-2"><a href="#代码演示">代码演示</a></li>
    <li class="sidebar-header-2"><a href="#api">API</a></li>
    <li class="sidebar-header-2"><a href="#注意事项">注意事项</a></li>
    <li class="sidebar-header-2"><a href="#更新日志">更新日志</a></li>
</ul>
      </div>
      <div class="span9 main"><h1 id="富文本编辑器-aceditor">富文本编辑器 AcEditor</h1>
<p>一个基于draft-js的Web富文本编辑器，适用于React框架，兼容主流现代浏览器。</p>
<h2 id="何时使用">何时使用</h2>
<p>富文本编辑器</p>
<h2 id="如何使用">如何使用</h2>
<pre class="hljs"><code>使用yarn安装
yarn add ac-editor

使用npm安装
npm install ac-editor --save

<span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-comment">// 引入编辑器以及EditorState子模块</span>
<span class="hljs-keyword">import</span> AcEditor, { EditorState } <span class="hljs-keyword">from</span> <span class="hljs-string">'ac-editor'</span>;
<span class="hljs-comment">// 引入编辑器样式</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'ac-editor/dist/index.css'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EditorDemo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{

  state = {
      <span class="hljs-attr">editorState</span>: <span class="hljs-literal">null</span>
  }

  <span class="hljs-keyword">async</span> componentDidMount () {
    <span class="hljs-comment">// 假设此处从服务端获取html格式的编辑器内容</span>
    <span class="hljs-keyword">const</span> htmlContent = <span class="hljs-keyword">await</span> fetchEditorContent()
    <span class="hljs-comment">// 使用EditorState.createFrom将html字符串转换为编辑器需要的editorState数据</span>
    <span class="hljs-keyword">this</span>.setState({
      <span class="hljs-attr">editorState</span>: EditorState.createFrom(htmlContent)
    })
  }

  submitContent = <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-comment">// 在编辑器获得焦点时按下ctrl+s会执行此方法</span>
    <span class="hljs-comment">// 编辑器内容提交到服务端之前，可直接调用editorState.toHTML()来获取HTML格式的内容</span>
    <span class="hljs-keyword">const</span> htmlContent = <span class="hljs-keyword">this</span>.state.editorState.toHTML();
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> saveEditorContent(htmlContent);
  }

  handleEditorChange = <span class="hljs-function">(<span class="hljs-params">editorState</span>) =&gt;</span> {
    <span class="hljs-keyword">this</span>.setState({ editorState });
  }

  render () {
    <span class="hljs-keyword">const</span> { editorState } = <span class="hljs-keyword">this</span>.state;
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"my-component"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">AcEditor</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{editorState}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{this.handleEditorChange}</span>
          <span class="hljs-attr">onSave</span>=<span class="hljs-string">{this.submitContent}</span>
        /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    )

  }

}
</span></code></pre><h2 id="代码演示">代码演示</h2>
<h2 id="api">API</h2>
<p><a href="https://www.yuque.com/margox/be/gz44tn">文档参考</a></p>
<p><a href="https://www.yuque.com/margox/be/mrgy92">文档参考</a></p>
<h2 id="注意事项">注意事项</h2>
<p>暂无</p>
<h2 id="更新日志">更新日志</h2>
      </div>
    </div>
  </div>

  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script type="text/javascript" src="assets/js/bootstrap.min.js"></script>
</body>
</html>
